{
  "prompt_id": "task_b_stakeholders_v1",
  "version": "1.1.0",
  "task": "stakeholder_detection",
  "description": "STRICT: Identifies stakeholders ONLY from email headers (sender, recipients, CC). Does NOT infer names from body text.",
  "model_params": {
    "temperature": 0.3,
    "num_predict": 500,
    "stop_sequences": []
  },
  "prompt_template": "You are extracting stakeholder information from workplace emails. CRITICAL: Extract ONLY from email headers (sender, recipients, CC fields). DO NOT extract names from subject or body text.\n\n---\n\nEMAIL HEADERS:\nSubject: {subject}\nFrom: {sender_email}\nTo: {recipients}\nCc: {cc_recipients}\nDate: {delivery_date}\n\n---\n\nTASK: For each person in the email headers (From, To, CC), identify:\n1. Full name and email (MUST have both - if email missing, SKIP this person)\n2. Inferred role (Product Manager, Engineer, Finance, Stakeholder, Director, etc.)\n3. Confidence in role inference (0.0-1.0)\n4. Interaction type (initiator=sender, responder=recipient, decision_maker=CC'd for approval, executor=recipient)\n5. Evidence for role inference\n\nRESPOND ONLY WITH VALID JSON (no preamble, no markdown backticks):\n\n{\n  \"extractions\": [\n    {\n      \"stakeholder\": \"Full Name\",\n      \"email\": \"email@company.com\",\n      \"inferred_role\": \"Product Manager|Software Engineer|QA|Finance|Director|Other\",\n      \"role_confidence\": 0.85,\n      \"interaction_type\": \"initiator|responder|decision_maker|executor|stakeholder\",\n      \"evidence\": [\n        \"Evidence 1: position in email (sender, recipient, CC'd)\",\n        \"Evidence 2: email domain pattern (e.g., @engineering, @product, @finance)\",\n        \"Evidence 3: name patterns or role indicators from email address\"\n      ]\n    }\n  ],\n  \"primary_stakeholder\": \"Most influential person (usually sender)\",\n  \"note\": \"Any patterns or ambiguities\"\n}\n\nCRITICAL RULES:\n- ONLY extract people who appear in From, To, or CC fields with valid email addresses\n- DO NOT extract names mentioned in the subject or body text\n- DO NOT infer emails for people without explicit email addresses\n- If a person has no email, DO NOT include them\n- Use email domain patterns to infer role (e.g., name@eng.company.com suggests engineer)\n- Interaction type should reflect position: sender=initiator, recipient=responder/executor, CC'd=decision_maker/stakeholder\n\nROLE INFERENCE FROM EMAIL PATTERNS:\n- @engineering, @eng: Software Engineer\n- @product, @pm: Product Manager\n- @qa, @test: QA/Tester\n- @finance, @accounting: Finance\n- @sales, @business: Sales/Business\n- @director, @leadership: Director/Lead\n- Default: \"Stakeholder\" if unclear\n\nEDGE CASES:\n- Unknown person from trusted domain? Set role to \"Other\", low-medium confidence\n- Person mentioned in body but not in headers? DO NOT extract them\n- Multiple people with same name? Extract each with their email address\n- CC'd people with no email visible? DO NOT extract them",
  "example_output": {
    "extractions": [
      {
        "stakeholder": "Alice Chen",
        "email": "alice@company.com",
        "inferred_role": "Product Manager",
        "role_confidence": 0.95,
        "interaction_type": "decision_maker",
        "evidence": [
          "Sender of email; initiates scope discussion",
          "Uses PM-specific language: 'scope', 'prioritize', 'Q4 roadmap'",
          "Coordination patterns: CC'd others for feedback"
        ]
      }
    ],
    "primary_stakeholder": "Alice Chen",
    "note": ""
  },
  "tags": ["default", "v1", "production"]
}
